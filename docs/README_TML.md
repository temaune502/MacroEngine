# Посібник з TML (Trae Macro Language) для "чайників"

Ласкаво просимо до **TML** — простої мови для створення макросів та автоматизації дій на комп'ютері. Ця мова створена, щоб бути максимально зрозумілою навіть для тих, хто ніколи не програмував.

---

## 1. Основні поняття

### Змінні (Сховища даних)
Змінні потрібні для зберігання інформації (чисел, тексту, станів).
*   `let` — створює нову змінну.
*   `set` — змінює значення вже існуючої змінної.

```python
let speed = 100        # Створили змінну speed
set speed = speed + 50 # Тепер speed дорівнює 150
```

### Функції (Набори команд)
Функція — це блок коду, який виконує певну задачу. Вона починається з `func`.

```python
func say_hello():
    print("Привіт, світ!")
```

---

## 2. Життєвий цикл макросу (Головні функції)

У TML є 4 спеціальні функції, які система викликає сама:

1.  **`on_init()`**: Викликається **один раз**, коли ви запускаєте макрос. Тут зручно налаштовувати початкові значення.
2.  **`on_tick(delta)`**: Викликається **постійно** (багато разів на секунду). Тут пишеться основна логіка. `delta` — це час, що минув з минулого виклику.
3.  **`on_hotkey(key_name)`**: Викликається, коли ви натискаєте гарячу клавішу.
4.  **`on_exit()`**: Викликається перед вимкненням макросу.

---

## 3. Вбудовані інструменти

### Миша (`mouse`)
*   `mouse.move(x, y)` або `mouse.move(vector)` — перемістити курсор.
*   `mouse.move_rel(dx, dy)` або `mouse.move_rel(vector)` — відносний рух.
*   `mouse.smooth_move(x, y, [час])` — плавне переміщення курсора до точки.
*   `mouse.move_bezier(p1, p2, p3, [час])` — рух по кривій Без'є (p1, p2 — контрольні точки, p3 — ціль).
*   `mouse.click(left)` — натиснути кнопку миші.
*   `mouse.double_click(left)` — подвійний клік.
*   `mouse.scroll(dx, dy)` — прокрутка коліщатком (вертикально/горизонтально).
*   `mouse.x`, `mouse.y` — отримати поточні координати курсора.
*   `mouse.pos` — отримати позицію як об'єкт вектора (`pos.x`, `pos.y`).

### Клавіатура (`key`)
*   `key.type("текст")` — швидко надрукувати текст.
*   `key.press(K_A)` — затиснути клавішу.
*   `key.release(K_A)` — відпустити клавішу.
*   `key.tap(K_ENTER)` — один раз натиснути клавішу.

### Вікна (`window`)
...
    *   `w.x`, `w.y`, `w.width`, `w.height` — параметри вікна.

### Екран (`screen`)
*   `screen.size()` — отримати розмір екрану як вектор.
*   `screen.get_color(x, y)` — отримати колір пікселя (повертає список R, G, B).
*   `screen.find_image("path.png")` — знайти картинку на екрані. Повертає вектор центру картинки або `None`.
*   `screen.find_all_images("path.png")` — знайти всі копії картинки на екрані.

### Система та Буфер (`system`)
*   `system.get_clipboard()` — отримати текст з буфера обміну.
*   `system.set_clipboard("текст")` — записати текст у буфер обміну.
*   `system.alert("повідомлення")` — показати системне вікно з повідомленням.

### Мережа (`net`)
*   `net.get("url")` — отримати текст сторінки за посиланням.
*   `net.post("url", {дані})` — відправити POST-запит.
*   `net.discord_webhook("url", "повідомлення")` — відправити повідомлення в Discord.

### Математика (`math`)
*   `math.sin(x)`, `math.cos(x)`, `math.tan(x)` — тригонометрія.
*   `math.sqrt(x)`, `math.abs(x)`, `math.pi`, `math.e` — базові речі.
*   `math.vector(x, y)` — створити вектор.
*   `math.lerp(a, b, t)` — лінійна інтерполяція (плавний перехід) між двома числами або векторами.
*   `math.bezier(p0, p1, p2, t)` — розрахунок точки на квадратичній кривій.
*   `math.bezier3(p0, p1, p2, p3, t)` — розрахунок точки на кубічній кривій.
*   `math.jitter(vector, amount)` — додати випадкове відхилення до вектора (викривлення).
    *   `v.lerp(other, t)` — інтерполяція вектора.

### Рандом (`random`)
*   `random.random()` — число від 0.0 до 1.0.
*   `random.randint(min, max)` — ціле випадкове число.
*   `random.uniform(min, max)` — випадкове число з плаваючою крапкою.
*   `random.choice(список)` — вибрати випадковий елемент зі списку.
*   `random.shuffle(список)` — перемішати список.

### Інше
*   `sleep(секунди)` — почекати вказаний час.
*   `print(щось)` — вивести повідомлення в консоль (для перевірки).
*   `yield` — "зробити паузу" в циклі, щоб не зависав комп'ютер.
*   `stop()` — повністю зупинити макрос.

---

## 4. Приклади автоматизації

### Приклад 1: Простий Авто-клікер
Клікає лівою кнопкою миші кожні 0.1 секунди, якщо натиснуто F1.

```python
let is_active = false

func on_hotkey(key_name):
    if key_name == K_F1:
        set is_active = not is_active
        print("Авто-клікер: " + is_active)

func on_tick(delta):
    if is_active:
        mouse.click(left)
        sleep(0.1)
```

### Приклад 2: Анти-AFK (Захист від вильоту)
Раз на хвилину рухає мишку туди-сюди, щоб система думала, що ви на місці.

```python
let timer = 0

func on_tick(delta):
    set timer = timer + delta
    
    if timer >= 60:  # Минуло 60 секунд
        let old_x = mouse.x
        let old_y = mouse.y
        
        mouse.move(old_x + 10, old_y)
        sleep(0.1)
        mouse.move(old_x, old_y)
        
        set timer = 0
        print("Анти-AFK спрацював")
```

### Приклад 3: Спам-бот для чату
Друкує повідомлення в чат по колу.

```python
let messages = ["Привіт!", "Як справи?", "Я бот на TML"]
let current = 0

func on_hotkey(name):
    if name == K_F2:
        for msg in messages:
            key.type(msg)
            key.tap(K_ENTER)
            sleep(1.0)
```

---

## 5. Таблиця імен клавіш (Константи)

Використовуйте ці константи для перевірки натискань у `on_hotkey` або для команд `key.press`, `key.tap`.

| Категорія | Константи в коді | Опис |
| :--- | :--- | :--- |
| **Керування** | `K_ENTER`, `K_ESC`, `K_SPACE`, `K_TAB` | Основні клавіші |
| **Стрілки** | `K_UP`, `K_DOWN`, `K_LEFT`, `K_RIGHT` | Навігація |
| **Функціональні** | `K_F1` ... `K_F12` | Гарячі клавіші |
| **Модифікатори** | `K_SHIFT`, `K_CTRL`, `K_ALT`, `K_CAPS_LOCK` | Системні клавіші |
| **Редагування** | `K_BACKSPACE`, `K_DELETE`, `K_INSERT` | Робота з текстом |
| **Навігація** | `K_HOME`, `K_END`, `K_PAGE_UP`, `K_PAGE_DOWN` | Переміщення |
| **Алфавіт** | `K_A` ... `K_Z` | Латинські літери |
| **Цифри** | `K_0` ... `K_9` | Числа (верхній ряд) |
| **Миша** | `left`, `right`, `middle` | Кнопки миші |

---

## Поради для початківців:
1.  **Координати**: Екран має координати (0,0) у лівому верхньому куті.
2.  **Паузи**: Завжди використовуйте `sleep()` або `yield` у циклах `while true`, щоб програма не "з'їдала" всю пам'ять.
3.  **Назви клавіш**: Використовуйте `K_A`, `K_B`, `K_ENTER`, `K_SPACE` тощо.
